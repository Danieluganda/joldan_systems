/**\n * Template Model\n * \n * Data access layer for document templates\n * Feature 10: Document/template management\n */\n\nconst pool = require('../config/database');\n\nclass Template {\n  /**\n   * Create a new template\n   */\n  static async create({\n    templateName,\n    templateType,\n    category,\n    content,\n    createdBy,\n    isActive,\n    description,\n  }) {\n    const query = `\n      INSERT INTO templates (template_name, template_type, category, content, created_by, is_active, description, created_at)\n      VALUES ($1, $2, $3, $4, $5, $6, $7, NOW())\n      RETURNING *\n    `;\n    const result = await pool.query(query, [\n      templateName,\n      templateType,\n      category,\n      content,\n      createdBy,\n      isActive,\n      description,\n    ]);\n    return result.rows[0];\n  }\n\n  /**\n   * Get template by ID\n   */\n  static async findById(id) {\n    const query = 'SELECT * FROM templates WHERE id = $1';\n    const result = await pool.query(query, [id]);\n    return result.rows[0];\n  }\n\n  /**\n   * Get all templates\n   */\n  static async getAll(filters = {}) {\n    let query = 'SELECT * FROM templates WHERE 1=1';\n    const values = [];\n    let paramCount = 1;\n\n    if (filters.templateType) {\n      query += ` AND template_type = $${paramCount}`;\n      values.push(filters.templateType);\n      paramCount++;\n    }\n\n    if (filters.category) {\n      query += ` AND category = $${paramCount}`;\n      values.push(filters.category);\n      paramCount++;\n    }\n\n    if (filters.isActive) {\n      query += ` AND is_active = $${paramCount}`;\n      values.push(filters.isActive);\n      paramCount++;\n    }\n\n    query += ' ORDER BY created_at DESC';\n    const result = await pool.query(query, values);\n    return result.rows;\n  }\n\n  /**\n   * Update template\n   */\n  static async update(id, updates) {\n    const keys = Object.keys(updates);\n    const values = Object.values(updates);\n    const setClauses = keys.map((key, i) => `${key} = $${i + 1}`).join(', ');\n    const query = `\n      UPDATE templates\n      SET ${setClauses}, updated_at = NOW()\n      WHERE id = $${keys.length + 1}\n      RETURNING *\n    `;\n    values.push(id);\n    const result = await pool.query(query, values);\n    return result.rows[0];\n  }\n\n  /**\n   * Delete template\n   */\n  static async delete(id) {\n    const query = 'DELETE FROM templates WHERE id = $1';\n    await pool.query(query, [id]);\n  }\n\n  /**\n   * Get active templates by type\n   */\n  static async getActiveByType(templateType) {\n    const query = `\n      SELECT * FROM templates \n      WHERE template_type = $1 \n      AND is_active = true\n      ORDER BY template_name ASC\n    `;\n    const result = await pool.query(query, [templateType]);\n    return result.rows;\n  }\n\n  /**\n   * Get templates by category\n   */\n  static async getByCategory(category) {\n    const query = `\n      SELECT * FROM templates \n      WHERE category = $1 \n      AND is_active = true\n      ORDER BY template_name ASC\n    `;\n    const result = await pool.query(query, [category]);\n    return result.rows;\n  }\n}\n\nmodule.exports = Template;\n"
