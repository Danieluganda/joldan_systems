/**\n * Contract Model\n * \n * Data access layer for contract records\n * Feature 9: Contract management\n */\n\nconst pool = require('../config/database');\n\nclass Contract {\n  /**\n   * Create a new contract\n   */\n  static async create({\n    awardId,\n    contractNumber,\n    vendorId,\n    startDate,\n    endDate,\n    value,\n    status,\n    paymentTerms,\n    deliveryTerms,\n    documentUrl,\n  }) {\n    const query = `\n      INSERT INTO contracts (award_id, contract_number, vendor_id, start_date, end_date, value, status, payment_terms, delivery_terms, document_url, created_at)\n      VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, NOW())\n      RETURNING *\n    `;\n    const result = await pool.query(query, [\n      awardId,\n      contractNumber,\n      vendorId,\n      startDate,\n      endDate,\n      value,\n      status,\n      paymentTerms,\n      deliveryTerms,\n      documentUrl,\n    ]);\n    return result.rows[0];\n  }\n\n  /**\n   * Get contract by ID\n   */\n  static async findById(id) {\n    const query = 'SELECT * FROM contracts WHERE id = $1';\n    const result = await pool.query(query, [id]);\n    return result.rows[0];\n  }\n\n  /**\n   * Get all contracts\n   */\n  static async getAll(filters = {}) {\n    let query = 'SELECT * FROM contracts WHERE 1=1';\n    const values = [];\n    let paramCount = 1;\n\n    if (filters.status) {\n      query += ` AND status = $${paramCount}`;\n      values.push(filters.status);\n      paramCount++;\n    }\n\n    if (filters.vendorId) {\n      query += ` AND vendor_id = $${paramCount}`;\n      values.push(filters.vendorId);\n      paramCount++;\n    }\n\n    if (filters.awardId) {\n      query += ` AND award_id = $${paramCount}`;\n      values.push(filters.awardId);\n      paramCount++;\n    }\n\n    query += ' ORDER BY created_at DESC';\n    const result = await pool.query(query, values);\n    return result.rows;\n  }\n\n  /**\n   * Update contract\n   */\n  static async update(id, updates) {\n    const keys = Object.keys(updates);\n    const values = Object.values(updates);\n    const setClauses = keys.map((key, i) => `${key} = $${i + 1}`).join(', ');\n    const query = `\n      UPDATE contracts\n      SET ${setClauses}, updated_at = NOW()\n      WHERE id = $${keys.length + 1}\n      RETURNING *\n    `;\n    values.push(id);\n    const result = await pool.query(query, values);\n    return result.rows[0];\n  }\n\n  /**\n   * Delete contract\n   */\n  static async delete(id) {\n    const query = 'DELETE FROM contracts WHERE id = $1';\n    await pool.query(query, [id]);\n  }\n\n  /**\n   * Get contracts by award\n   */\n  static async getByAward(awardId) {\n    const query = 'SELECT * FROM contracts WHERE award_id = $1';\n    const result = await pool.query(query, [awardId]);\n    return result.rows[0];\n  }\n\n  /**\n   * Get contracts by vendor\n   */\n  static async getByVendor(vendorId) {\n    const query = 'SELECT * FROM contracts WHERE vendor_id = $1 ORDER BY created_at DESC';\n    const result = await pool.query(query, [vendorId]);\n    return result.rows;\n  }\n}\n\nmodule.exports = Contract;\n"
