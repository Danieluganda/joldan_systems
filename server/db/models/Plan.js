/**\n * Plan Model\n * \n * Data access layer for procurement plans\n * Feature 2: Procurement plan management\n */\n\nconst pool = require('../config/database');\n\nclass Plan {\n  /**\n   * Create a new procurement plan\n   */\n  static async create({\n    procurementId,\n    planName,\n    itemDescription,\n    estimatedValue,\n    quantity,\n    deliveryDate,\n    specifications,\n  }) {\n    const query = `\n      INSERT INTO plans (procurement_id, plan_name, item_description, estimated_value, quantity, delivery_date, specifications, created_at)\n      VALUES ($1, $2, $3, $4, $5, $6, $7, NOW())\n      RETURNING *\n    `;\n    const result = await pool.query(query, [\n      procurementId,\n      planName,\n      itemDescription,\n      estimatedValue,\n      quantity,\n      deliveryDate,\n      specifications,\n    ]);\n    return result.rows[0];\n  }\n\n  /**\n   * Get plan by ID\n   */\n  static async findById(id) {\n    const query = 'SELECT * FROM plans WHERE id = $1';\n    const result = await pool.query(query, [id]);\n    return result.rows[0];\n  }\n\n  /**\n   * Get all plans\n   */\n  static async getAll() {\n    const query = 'SELECT * FROM plans ORDER BY created_at DESC';\n    const result = await pool.query(query);\n    return result.rows;\n  }\n\n  /**\n   * Update plan\n   */\n  static async update(id, updates) {\n    const keys = Object.keys(updates);\n    const values = Object.values(updates);\n    const setClauses = keys.map((key, i) => `${key} = $${i + 1}`).join(', ');\n    const query = `\n      UPDATE plans\n      SET ${setClauses}, updated_at = NOW()\n      WHERE id = $${keys.length + 1}\n      RETURNING *\n    `;\n    values.push(id);\n    const result = await pool.query(query, values);\n    return result.rows[0];\n  }\n\n  /**\n   * Delete plan\n   */\n  static async delete(id) {\n    const query = 'DELETE FROM plans WHERE id = $1';\n    await pool.query(query, [id]);\n  }\n\n  /**\n   * Get plans by procurement\n   */\n  static async getByProcurement(procurementId) {\n    const query = 'SELECT * FROM plans WHERE procurement_id = $1 ORDER BY created_at DESC';\n    const result = await pool.query(query, [procurementId]);\n    return result.rows;\n  }\n}\n\nmodule.exports = Plan;\n"
